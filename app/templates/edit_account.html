{% extends "base.html" %}

{% block content %}
<style>
    .custom-form .form-floating > input:not(:focus):placeholder-shown + label {
        background-color: transparent;
    }

    .custom-form .form-floating > input + label:after {
        background-color: transparent !important;
    }
</style>
<main class="form-edit-account">
    <div class="container mt-5">
        <h1 class="mb-4" style="border-color: var(--light); border-radius: 25px;border-width: 2px;">Edit Account</h1>
        <div class="row mb-4">
            <!-- Profile Picture and Form -->
            <div class="col-md-3 text-center">
                <img src="{% if user.profile_picture %}{{ user.profile_picture }}{% else %}/static/images/default_pfp.png{% endif %}" alt="Profile Picture" class="img-fluid rounded-circle mb-3" style="max-width: 150px; margin-top: 4rem;">
                <form action="/upload_profile_picture" method="POST" enctype="multipart/form-data" style="display: inline-block; width: 100%;">
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <label for="profile_picture" style="display: block; padding: 6px 12px; cursor: pointer; background-color: orange; color: white; border-radius: 4px; width: 100%; max-width: 150px; text-align: center;">
                            Choose File
                        </label>
                        <input type="file" id="profile_picture" name="profile_picture" class="form-control mb-2" style="display: none; font-size: 12px;" onchange="document.getElementById('file-name').textContent = this.files.length > 0 ? this.files[0].name : 'No file chosen'">
                        <span id="file-name" style="font-size: 12px; width: 100%; max-width: 150px; text-align: center; margin-top: 5px;">
                            No file chosen
                        </span>
                    </div>
                </form>
            </div>
            
            <div class="col-md-9">
                <form>
                    <!-- Personal Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="firstname" placeholder="First Name" value="{{ user.firstname }}">
                                <label for="firstname">First Name</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="lastname" placeholder="Last Name" value="{{ user.lastname }}">
                                <label for="lastname">Last Name</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3 custom-form">
                        <div class="form-floating">
                            <input type="email" class="form-control" id="email" placeholder="Email" value="{{ user.email }}" readonly style="background-image: linear-gradient(to left, var(--orange), var(--bg)); color:var(--light); border-color: var(--light);">
                            <label for="email" style="color: var(--light);">Email</label>
                        </div>
                    </div>

                    <!-- Department Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="department_name" placeholder="Deprartment" value="{{ user.department_name }}">
                                <label for="department_name">Department</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="number" class="form-control" id="department_id" placeholder="Department #" value="{{ user.department_id }}">
                                <label for="department_id">Department #</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="manager" placeholder="Manager Last Name" value="{{ user.manager }}">
                            <label for="manager">Manager Last Name</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="form-floating">
                            <select class="form-select" id="rnLevel" name="rn_level">
                                <option value="" {% if not user.rn_level %}selected{% endif %}>N/A</option>
                                <option value="RN I" {% if user.rn_level == 'RN I' %}selected{% endif %}>RN I</option>
                                <option value="RN II" {% if user.rn_level == 'RN II' %}selected{% endif %}>RN II</option>
                                <option value="RN III" {% if user.rn_level == 'RN III' %}selected{% endif %}>RN III</option>
                                <option value="RN IV" {% if user.rn_level == 'RN IV' %}selected{% endif %}>RN IV</option>
                                <option value="RN V" {% if user.rn_level == 'RN V' %}selected{% endif %}>RN V</option>
                            </select>
                            <label for="rnLevel">RN Level</label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="mt-4">
                        <button type="submit" class="btn btn-primary" style="background-color: var(--orange);">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
{% endblock %}
