{% extends "base.html" %}
{% block title %}NurseRank: Account{% endblock %}
{% block content %}
<div class="container mt-5">
  <h1 class="mb-4">Nurses</h1>
  <table class="table table-dark table-striped" id="nursesTable">
    <thead>
      <tr>
        <th scope="col" onclick="sortTable(0)">ID</th>
        <th scope="col" onclick="sortTable(1)">Manager</th>
        <th scope="col" onclick="sortTable(2)">Department Name</th>
        <th scope="col" onclick="sortTable(3)">Department ID</th>
        <th scope="col" onclick="sortTable(4)">RN Level</th>
      </tr>
    </thead>
    <tbody>
      {% for nurse in nurses %}
      <tr>
        <td>{{ nurse.id }}</td>
        <td>{{ nurse.manager }}</td>
        <td>{{ nurse.department_name }}</td>
        <td>{{ nurse.department_id }}</td>
        <td>{{ nurse.rn_level }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
<script>

function sortTable(columnIndex) {
  var table = document.getElementById("nursesTable");
  var rows = table.getElementsByTagName("TR");
  var switching = true;
  var shouldSwitch;
  var direction = "asc";
  var switchcount = 0;

  while (switching) {
    switching = false;
    var rowsArray = Array.prototype.slice.call(rows, 1); // Skip the header row
    for (var i = 0; i < (rowsArray.length - 1); i++) {
      shouldSwitch = false;
      var x = rowsArray[i].getElementsByTagName("TD")[columnIndex];
      var y = rowsArray[i + 1].getElementsByTagName("TD")[columnIndex];
      if (direction == "asc") {
        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
          shouldSwitch = true;
          break;
        }
      } else if (direction == "desc") {
        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
          shouldSwitch = true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      rowsArray[i].parentNode.insertBefore(rowsArray[i + 1], rowsArray[i]);
      switching = true;
      switchcount++;
    } else {
      if (switchcount == 0 && direction == "asc") {
        direction = "desc";
        switching = true;
      }
    }
  }
}
</script>
</body>
{% endblock %}